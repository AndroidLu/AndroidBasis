package com.hugh.basis.fragments;import android.content.Context;import android.content.Intent;import android.os.Bundle;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.AdapterView;import android.widget.ArrayAdapter;import android.widget.ListView;import android.widget.TextView;import com.hugh.basis.R;import com.hugh.basis.activities.FragmentActivity;import java.util.ArrayList;import java.util.List;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import androidx.fragment.app.Fragment;import androidx.localbroadcastmanager.content.LocalBroadcastManager;/** * Created by chenyw on 2019-06-11. */public class NameFragment extends Fragment {    private List<String> names;    private ListView lv;    private showPro mCallback;    private ArrayAdapter<String> adapter;    public interface showPro {        public void showProByName(String name);    }    @Override    public void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        initData();        Log.e("aaa","onCreate");    }    private void initData() {        names = new ArrayList<String>();        names.add("韩愈");        names.add("柳宗元");        names.add("苏轼");        names.add("苏辙");        names.add("苏洵");        names.add("欧阳修");        names.add("曾巩");        names.add("王安石");    }    @Override    public void setUserVisibleHint(boolean isVisibleToUser) {        super.setUserVisibleHint(isVisibleToUser);        Log.e("aaa","isVisibleToUser"+isVisibleToUser);    }    @Override    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {        super.onViewCreated(view, savedInstanceState);        Log.e("aaa","onViewCreated");    }    @Override    public void onStart() {        super.onStart();        Log.e("aaa","onStart");    }    @Nullable    @Override    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        View v = inflater.inflate(R.layout.name_fg, null);        initLv(v);        Log.e("aaa","onCreateView");        return v;    }    private void initLv(View v) {        lv = v.findViewById(R.id.name_lv);        adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1                , names);        lv.setAdapter(adapter);        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {            @Override            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                TextView nameTV = (TextView) view;                String name = nameTV.getText().toString();                if ("韩愈".equals(name)) {                    // 1.使用接口                    //接口可以实现两个Fragment之间的通信，也可以实现Fragment和Activity之间的通信，                    // 这大概是用的比较多的一种方式，也是个人比较推荐的一种方式，使用接口来实现两个Fragment之间通信，要通过宿主Activity中转一下，如果是Fragment和宿主Activity通信则直接调用即可，                    mCallback.showProByName(name);                } else if ("柳宗元".equals(name)) {                    //2.直接在一个Fragment中调用另外一个Fragment中的方法                    NameContentFragment cf = (NameContentFragment) getActivity().getSupportFragmentManager().findFragmentById(R.id.content_fg);                    cf.showPro(name);                } else if ("苏轼".equals(name) || "苏辙".equals(name)) {                    //3.使用广播                    Intent intent = new Intent("showPro");                    intent.putExtra("name", name);                    LocalBroadcastManager.getInstance(getActivity())                            .sendBroadcast(intent);                } else if ("苏洵".equals(name)) {                    //4.Fragment直接调用Activity中的public方法                    ((FragmentActivity) getActivity()).showProByName(name);                }            }        });    }    @Override    public void onAttach(Context context) {        super.onAttach(context);        if (context != null) {            mCallback = (showPro) context;        }    }    public void clearData() {        names = new ArrayList<String>();        adapter = new ArrayAdapter<String>(getActivity(),                android.R.layout.simple_list_item_1, names);        lv.setAdapter(adapter);    }}